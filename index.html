<!-- Created with the assistance of ChatGPT -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bible App by Yel Portillo</title>

  <!-- Open Graph for Facebook -->
  <meta property="og:title" content="Bible App by Yel Portillo" />
  <meta property="og:description" content="Get your daily Bible verse and prayer, plus share prayers on the Prayer Wall." />
  <meta property="og:image" content="https://yelportillo.github.io/bibleapp/media/bible.jpeg" />
  <meta property="og:url" content="https://yelportillo.github.io/bibleapp/" />
  <meta property="og:type" content="website" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Bible App by Yel Portillo">
  <meta name="twitter:description" content="Get your daily Bible verse and prayer, plus share prayers on the Prayer Wall.">
  <meta name="twitter:image" content="https://yelportillo.github.io/bibleapp/media/bible.jpeg">

  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      text-align: center;
      margin: 0;
      background-color: #f4f4f4;
      color: #333;
    }
    #container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin: 40px auto;
      position: relative;
    }
    h2 {
      margin-top: 0;
      font-weight: bold;
    }
    p {
      margin: 10px 0;
      font-size: 16px;
      line-height: 1.5;
    }
    img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      margin-top: 15px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    /* Menu Icon */
    .menu {
      position: absolute;
      top: 15px;
      right: 20px;
      cursor: pointer;
      font-size: 22px;
      background: white;
      padding: 5px 10px;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    .menu-items {
      display: none;
      position: absolute;
      top: 50px;
      right: 20px;
      background: white;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border-radius: 5px;
      list-style: none;
      padding: 10px;
    }
    .menu-items li {
      padding: 10px;
      cursor: pointer;
      text-align: left;
    }
    .menu-items li:hover {
      background: #f0f0f0;
    }
    .tab {
      display: none;
    }
    .active {
      display: block;
    }
    #prayer-list {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    .prayer-item {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      margin-top: 10px;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
      text-align: center;
      width: 90%;
      max-width: 500px;
      word-wrap: break-word;
    }
    #prayerTab input,
    #prayerTab textarea {
      width: 100%;
      max-width: 500px;
      display: block;
      margin: 0 auto 10px auto;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
    @media screen and (max-width: 480px) {
      #container {
        width: 95%;
      }
      #prayerTab input,
      #prayerTab textarea {
        width: 90%;
      }
    }
    #verse {
      font-weight: normal;
    }
    #prayer {
      font-style: italic;
    }
  </style>
</head>
<body>
  <div id="container">
    <!-- Menu inside container -->
    <div class="menu" onclick="toggleMenu()">â˜°</div>
    <ul class="menu-items">
      <li onclick="switchTab('verseTab')">Verse of the Day</li>
      <li onclick="switchTab('prayerTab')">Prayer Wall</li>
    </ul>

    <!-- Verse of the Day -->
    <div id="verseTab" class="tab active">
      <h2>Verse of the Day</h2>
      <p id="date"></p>
      <p id="verse"></p>
      <p id="prayer"></p>
      <img id="image" src="media/bible.jpeg" alt="Bible Image">
      <button onclick="generateVerse()">Generate New Verse</button>
    </div>

    <!-- Prayer Wall -->
    <div id="prayerTab" class="tab">
      <h2>Prayer Wall</h2>
      <input type="text" id="name" placeholder="Your Name (Optional)">
      <textarea id="prayerInput" placeholder="Write your prayer here..."></textarea>
      <button onclick="submitPrayer()">Submit Prayer</button>
      <div id="prayer-list"></div>
    </div>
  </div>

  <script>
    function toggleMenu() {
      const menu = document.querySelector(".menu-items");
      menu.style.display = menu.style.display === "block" ? "none" : "block";
    }

    function switchTab(tabId) {
      document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      document.querySelector(".menu-items").style.display = "none";
    }

    function displayDate() {
      const today = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById("date").innerText = today.toLocaleDateString("en-US", options);
    }

    async function generateVerse(retryCount = 0) {
      try {
        const response = await fetch("https://labs.bible.org/api/?passage=random&type=json");
        if (!response.ok) throw new Error("Verse fetch failed");
        const data = await response.json();
        const verseData = data[0];
        const verseText = `${verseData.bookname} ${verseData.chapter}:${verseData.verse} - ${verseData.text}`;
        document.getElementById("verse").innerText = verseText;

        document.getElementById("prayer").innerText =
          `Lord, help me to apply this verse to my life and live by Your Word. Amen.`;
      } catch (error) {
        if (retryCount < 3) {
          setTimeout(() => generateVerse(retryCount + 1), 1000);
        } else {
          document.getElementById("verse").innerText = "Failed to load verse. Please try again.";
          document.getElementById("prayer").innerText = "";
        }
      }
    }

    function submitPrayer() {
      const nameInput = document.getElementById("name").value.trim();
      const prayerInput = document.getElementById("prayerInput").value.trim();
      
      if (!prayerInput) {
        alert("Please enter a prayer before submitting.");
        return;
      }

      const name = nameInput || "Anonymous";
      const now = new Date();
      const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };
      const timeOptions = { hour: '2-digit', minute: '2-digit', hour12: true };

      const prayerEntry = {
        name,
        prayer: prayerInput,
        date: now.toLocaleDateString("en-US", dateOptions),
        time: now.toLocaleTimeString("en-US", timeOptions)
      };

      const prayers = JSON.parse(localStorage.getItem("prayers")) || [];
      prayers.unshift(prayerEntry);
      localStorage.setItem("prayers", JSON.stringify(prayers));

      displayPrayers();
      document.getElementById("name").value = "";
      document.getElementById("prayerInput").value = "";
    }

    function displayPrayers() {
      const prayerList = document.getElementById("prayer-list");
      prayerList.innerHTML = "";

      const prayers = JSON.parse(localStorage.getItem("prayers")) || [];
      prayers.forEach(prayer => {
        const prayerItem = document.createElement("div");
        prayerItem.classList.add("prayer-item");
        prayerItem.innerHTML = `
          <div>${prayer.name}</div>
          <div>${prayer.prayer}</div>
          <small>${prayer.date} at ${prayer.time}</small>
        `;
        prayerList.appendChild(prayerItem);
      });
    }

    window.onload = function() {
      displayDate();
      generateVerse();
      displayPrayers();
    };
  </script>
</body>
</html>
