<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bible App</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
  body {
    font-family: 'Inter', sans-serif;
    background: #000014;
    margin: 0;
    padding: 40px 20px;
    display: flex;
    justify-content: center;
    color: #00f0ff;
  }
  #container {
    background: #001022;
    max-width: 600px;
    width: 100%;
    padding: 30px 40px 40px;
    border-radius: 14px;
    box-shadow: 0 0 25px #00f0ff, 0 0 50px #00bfff;
    text-align: center;
    position: relative;
    color: #00f0ff;
  }
  h2 {
    font-weight: 600;
    margin-bottom: 12px;
    color: #00f0ff;
    text-shadow: 0 0 8px #00bfff;
  }
  #menu {
    position: absolute;
    top: 24px;
    right: 24px;
    font-size: 28px;
    cursor: pointer;
    user-select: none;
    color: #00f0ff;
    text-shadow: 0 0 6px #00bfff;
  }
  ul.menu-items {
    position: absolute;
    top: 60px;
    right: 24px;
    background: #002044;
    box-shadow: 0 0 15px #00bfff;
    border-radius: 10px;
    list-style: none;
    padding: 10px 0;
    margin: 0;
    width: 180px;
    display: none;
  }
  ul.menu-items li {
    padding: 10px 20px;
    cursor: pointer;
    color: #00f0ff;
  }
  ul.menu-items li:hover {
    background-color: #003366;
    color: #00bfff;
  }
  #date {
    color: #00dfff;
    margin-bottom: 20px;
    font-size: 14px;
  }
  #verse {
    font-weight: 400;
    font-size: 18px;
    margin-bottom: 14px;
    line-height: 1.5;
    color: #00f0ff;
    text-shadow: 0 0 6px #00bfff;
  }
  #prayer {
    font-style: italic;
    font-size: 16px;
    color: #00bfff;
    margin-bottom: 20px;
  }
  button {
    background-color: #00bfff;
    color: white;
    border: none;
    padding: 12px 28px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 0 10px #00bfff, 0 0 20px #00f0ff;
  }
  button:hover {
    background-color: #00f0ff;
    box-shadow: 0 0 15px #00f0ff, 0 0 30px #00bfff;
    transform: scale(1.05);
  }
  #prayerTab {
    margin-top: 40px;
  }
  #prayerTab h2 {
    margin-bottom: 16px;
  }
  #name, #prayerInput {
    width: 100%;
    max-width: 100%;
    margin-bottom: 12px;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #00bfff;
    font-size: 16px;
    font-family: 'Inter', sans-serif;
    box-sizing: border-box;
    background: #002044;
    color: #00f0ff;
  }
  #prayerInput {
    height: 100px;
    resize: vertical;
  }
  #prayer-list {
    margin-top: 30px;
    text-align: left;
  }
  .prayer-item {
    background: #003366;
    border-radius: 10px;
    padding: 18px 20px;
    margin-bottom: 16px;
    box-shadow: 0 0 10px #00bfff;
    word-wrap: break-word;
  }
  .prayer-name {
    font-weight: 600;
    margin-bottom: 6px;
    color: #00bfff;
  }
  .prayer-text {
    margin-bottom: 8px;
    white-space: pre-wrap;
    color: #00f0ff;
  }
  .prayer-time {
    font-size: 13px;
    color: #00dfff;
  }
</style>
</head>
<body>

<div id="container">
  <div id="menu" onclick="toggleMenu()">☰</div>
  <ul class="menu-items" id="menu-items">
    <li onclick="showVerseTab()">Verse of the Day</li>
    <li onclick="showPrayerTab()">Prayer Wall</li>
  </ul>

  <!-- Verse of the Day Section -->
  <div id="verseTab">
    <h2>Verse of the Day</h2>
    <p id="date"></p>
    <p id="verse">Loading verse...</p>
    <p id="prayer"></p>
    <button onclick="fetchRandomVerse()">Generate New Verse</button>
  </div>

  <!-- Prayer Wall Section -->
  <div id="prayerTab" style="display:none;">
    <h2>Prayer Wall</h2>
    <input id="name" placeholder="Your Name (optional)" />
    <textarea id="prayerInput" placeholder="Write your prayer here..."></textarea>
    <button onclick="submitPrayer()">Submit Prayer</button>
    <div id="prayer-list"></div>
  </div>
</div>

<script>
const BOOKS = {
  "Genesis": [50, 31], "Exodus": [40, 40], "Leviticus": [27, 34], "Numbers": [36, 36],
  "Deuteronomy": [34, 33], "Joshua": [24, 33], "Judges": [21, 31], "Ruth": [4, 22],
  "1 Samuel": [31, 31], "2 Samuel": [24, 25], "1 Kings": [22, 53], "2 Kings": [25, 30],
  "1 Chronicles": [29, 43], "2 Chronicles": [36, 36], "Ezra": [10, 44], "Nehemiah": [13, 73],
  "Esther": [10, 32], "Job": [42, 42], "Psalms": [150, 176], "Proverbs": [31, 35],
  "Ecclesiastes": [12, 29], "Song of Solomon": [8, 14], "Isaiah": [66, 25], "Jeremiah": [52, 34],
  "Lamentations": [5, 22], "Ezekiel": [48, 35], "Daniel": [12, 45], "Hosea": [14, 15],
  "Joel": [3, 32], "Amos": [9, 15], "Obadiah": [1, 21], "Jonah": [4, 11], "Micah": [7, 20],
  "Nahum": [3, 15], "Habakkuk": [3, 19], "Zephaniah": [3, 20], "Haggai": [2, 23], "Zechariah": [14, 21],
  "Malachi": [4, 6], "Matthew": [28, 28], "Mark": [16, 20], "Luke": [24, 53], "John": [21, 25],
  "Acts": [28, 41], "Romans": [16, 27], "1 Corinthians": [16, 58], "2 Corinthians": [13, 33],
  "Galatians": [6, 18], "Ephesians": [6, 24], "Philippians": [4, 23], "Colossians": [4, 18],
  "1 Thessalonians": [5, 28], "2 Thessalonians": [3, 18], "1 Timothy": [6, 21], "2 Timothy": [4, 22],
  "Titus": [3, 15], "Philemon": [1, 25], "Hebrews": [13, 29], "James": [5, 20], "1 Peter": [5, 14],
  "2 Peter": [3, 18], "1 John": [5, 21], "2 John": [1, 13], "3 John": [1, 15], "Jude": [1, 25], "Revelation": [22, 21]
};

async function fetchRandomVerse() {
  const books = Object.keys(BOOKS);
  while (true) {
    const book = books[Math.floor(Math.random() * books.length)];
    const [maxChapters, maxVerses] = BOOKS[book];
    const chapter = Math.floor(Math.random() * maxChapters) + 1;
    const verse = Math.floor(Math.random() * maxVerses) + 1;
    const reference = `${book} ${chapter}:${verse}`;
    try {
      const res = await fetch(`https://bible-api.com/${encodeURIComponent(reference)}`);
      if (!res.ok) continue;
      const data = await res.json();
      document.getElementById('verse').textContent = `${data.reference} — ${data.text.trim()}`;
      document.getElementById('prayer').textContent = `Lord, speak to me through this verse and guide me today. Amen.`;
      break;
    } catch (err) { continue; }
  }
}

function toggleMenu() {
  const menu = document.getElementById('menu-items');
  menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
}

function showVerseTab() {
  document.getElementById('verseTab').style.display = 'block';
  document.getElementById('prayerTab').style.display = 'none';
  document.getElementById('menu-items').style.display = 'none';
}

function showPrayerTab() {
  document.getElementById('prayerTab').style.display = 'block';
  document.getElementById('verseTab').style.display = 'none';
  document.getElementById('menu-items').style.display = 'none';
}

function displayDate() {
  const today = new Date();
  const options = { weekday:'long', year:'numeric', month:'long', day:'numeric' };
  document.getElementById('date').textContent = today.toLocaleDateString('en-US', options);
}

function submitPrayer() {
  const nameInput = document.getElementById('name').value.trim();
  const prayerInput = document.getElementById('prayerInput').value.trim();
  if (!prayerInput) { alert("Please enter your prayer before submitting."); return; }
  const name = nameInput || "Anonymous";
  const now = new Date();
  const dateOptions = { year:'numeric', month:'long', day:'numeric' };
  const timeOptions = { hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:true };
  const date = now.toLocaleDateString('en-US', dateOptions);
  const time = now.toLocaleTimeString('en-US', timeOptions);
  const newPrayer = { name, prayer: prayerInput, date, time };
  let prayers = JSON.parse(localStorage.getItem('prayers')) || [];
  prayers.unshift(newPrayer);
  localStorage.setItem('prayers', JSON.stringify(prayers));
  displayPrayers();
  document.getElementById('name').value = '';
  document.getElementById('prayerInput').value = '';
}

function displayPrayers() {
  const list = document.getElementById('prayer-list');
  list.innerHTML = '';
  let prayers = JSON.parse(localStorage.getItem('prayers')) || [];
  prayers.forEach(p => {
    const div = document.createElement('div');
    div.className = 'prayer-item';
    div.innerHTML = `
      <div class="prayer-name">${escapeHtml(p.name)}</div>
      <div class="prayer-text">${escapeHtml(p.prayer)}</div>
      <div class="prayer-time">${p.date} at ${p.time}</div>
    `;
    list.appendChild(div);
  });
}

function escapeHtml(text) {
  const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' };
  return text.replace(/[&<>"']/g, m => map[m]);
}

window.onload = () => {
  displayDate();
  fetchRandomVerse();
  displayPrayers();
};
</script>
</body>
</html>
